var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e){t.appendChild(e)}function c(t){t.parentNode.removeChild(t)}function l(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function s(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function f(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}let d;function p(t){d=t}function g(t){(function(){if(!d)throw new Error("Function called outside component initialization");return d})().$$.on_mount.push(t)}const h=[],m=[],v=[],y=[],b=Promise.resolve();let w=!1;function S(t){v.push(t)}let $=!1;const x=new Set;function E(){if(!$){$=!0;do{for(let t=0;t<h.length;t+=1){const e=h[t];p(e),T(e.$$)}for(p(null),h.length=0;m.length;)m.pop()();for(let t=0;t<v.length;t+=1){const e=v[t];x.has(e)||(x.add(e),e())}v.length=0}while(h.length);for(;y.length;)y.pop()();w=!1,$=!1,x.clear()}}function T(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(S)}}const C=new Set;function P(t,e){-1===t.$$.dirty[0]&&(h.push(t),w||(w=!0,b.then(E)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function N(i,a,l,u,s,f,g=[-1]){const h=d;p(i);const m=a.props||{},v=i.$$={fragment:null,ctx:null,props:f,update:t,not_equal:s,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:[]),callbacks:n(),dirty:g,skip_bound:!1};let y=!1;if(v.ctx=l?l(i,m,((t,e,...n)=>{const o=n.length?n[0]:e;return v.ctx&&s(v.ctx[t],v.ctx[t]=o)&&(!v.skip_bound&&v.bound[t]&&v.bound[t](o),y&&P(i,t)),e})):[],v.update(),y=!0,o(v.before_update),v.fragment=!!u&&u(v.ctx),a.target){if(a.hydrate){const t=function(t){return Array.from(t.childNodes)}(a.target);v.fragment&&v.fragment.l(t),t.forEach(c)}else v.fragment&&v.fragment.c();a.intro&&((b=i.$$.fragment)&&b.i&&(C.delete(b),b.i(w))),function(t,n,i){const{fragment:a,on_mount:c,on_destroy:l,after_update:u}=t.$$;a&&a.m(n,i),S((()=>{const n=c.map(e).filter(r);l?l.push(...n):o(n),t.$$.on_mount=[]})),u.forEach(S)}(i,a.target,a.anchor),E()}var b,w;p(h)}var R=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopWidth","boxSizing","fontFamily","fontSize","fontWeight","height","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","outlineWidth","overflow","overflowX","overflowY","paddingBottom","paddingLeft","paddingRight","paddingTop","textAlign","textOverflow","textTransform","whiteSpace","wordBreak","wordWrap"],_=function(t,e){var n=document.createElement("div");return function(e){var o,r=(o={position:"absolute",left:-9999,top:0,zIndex:-2e3},"TEXTAREA"===t.tagName&&R.push("width"),R.forEach((function(e){o[e]=getComputedStyle(t)[e]})),o);Object.keys(r).forEach((function(t){n.style[t]=r[t]})),n.innerHTML=e,t.parentNode.insertBefore(n,t.nextSibling)}(e),{rect:function(){var t=n.ownerDocument.getElementById("caret-position-marker"),e={left:t.offsetLeft,top:t.offsetTop,height:t.offsetHeight};return n.parentNode.removeChild(n),e}}};function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var O=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.customPos,n=t.iframe,o=t.noShadowCaret;return n?{iframe:n,window:n.contentWindow,document:n.contentDocument||n.contentWindow.document,noShadowCaret:o,customPos:e}:{window:window,document:document,noShadowCaret:o,customPos:e}},L=function(t){return"object"===k(t)&&null!==t},B=function(t,e){var n=function(){return t.selectionStart},o=function(o){var r=function(t){return t.replace(/<|>|`|"|&/g,"?").replace(/\r\n|\r|\n/g,"<br/>")};(e.customPos||0===e.customPos)&&(o=e.customPos);var i=void 0===o?n():o,a=t.value.slice(0,i),c=t.value.slice(i),l='<span style="position: relative; display: inline;">'.concat(r(a),"</span>");l+='<span id="caret-position-marker" style="position: relative; display: inline;">|</span>',l+='<span style="position: relative; display: inline;">'.concat(r(c),"</span>");var u=_(t,l).rect();return u.pos=n(),u};return{getPos:n,setPos:function(e){return t.setSelectionRange(e,e),t},getOffset:function(n){var r=function(t,e){var n=e&&e.window||window,o=e&&e.document||document,r=t.getBoundingClientRect(),i=o.documentElement,a=n.pageXOffset||i.scrollLeft,c=n.pageYOffset||i.scrollTop;return{top:r.top+c,left:r.left+a}}(t),i=o(n);return{top:r.top+i.top+e.document.body.scrollTop,left:r.left+i.left+e.document.body.scrollLeft,height:i.height}},getPosition:o}},A=function(t,e){return function(t){return!!(t.contentEditable?"true"===t.contentEditable:"true"===t.getAttribute("contenteditable"))}(t)?function(t,e){var n=function(){var n=o(),r={height:0,left:0,right:0};if(!n)return r;var i=e.customPos||0===e.customPos;if(n.endOffset-1>0&&n.endContainer!==t||i){var a=n.cloneRange(),c=i?e.customPos:n.endOffset;a.setStart(n.endContainer,c-1<0?0:c-1),a.setEnd(n.endContainer,c);var l=a.getBoundingClientRect();r={height:l.height,left:l.left+l.width,top:l.top},a.detach()}if((!r||r&&0===r.height)&&!e.noShadowCaret){var u=n.cloneRange(),s=e.document.createTextNode("|");u.insertNode(s),u.selectNode(s);var f=u.getBoundingClientRect();r={height:f.height,left:f.left,top:f.top},s.parentNode.removeChild(s),u.detach()}if(r){var d=e.document.documentElement;r.top+=e.window.pageYOffset-(d.clientTop||0),r.left+=e.window.pageXOffset-(d.clientLeft||0)}return r},o=function(){if(e.window.getSelection){var t=e.window.getSelection();return t.rangeCount>0?t.getRangeAt(0):null}},r=function(){var e=o(),n=e.cloneRange();n.selectNodeContents(t),n.setEnd(e.endContainer,e.endOffset);var r=n.toString().length;return n.detach(),r};return{getPos:r,setPos:function(n){var o=e.window.getSelection();if(o){var r=0,i=!1;!function t(a,c){for(var l=0;l<c.childNodes.length;l++){var u=c.childNodes[l];if(i)break;if(3===u.nodeType){if(r+u.length>=a){i=!0;var s=e.document.createRange();s.setStart(u,a-r),o.removeAllRanges(),o.addRange(s);break}r+=u.length}else t(n,u)}}(n,t)}return t},getPosition:function(){var o=n(),i=r(),a=t.getBoundingClientRect(),c=a.top+e.document.body.scrollTop,l=a.left+e.document.body.scrollLeft;return o.left-=l,o.top-=c,o.pos=i,o},getOffset:n,getRange:o}}(t,e):B(t,e)};function I(e){let n,r,i,d,p,g,h,m,v,y;return{c(){var t,e,o;n=l("main"),r=l("div"),i=l("button"),i.textContent="▶",d=u("\n    x"),p=l("input"),g=u(" "),h=l("div"),m=l("textarea"),f(i,"class","play"),f(p,"type","text"),t="width",e="32px",p.style.setProperty(t,e,o?"important":""),p.value=H,f(m,"placeholder","再生するテキスト"),f(m,"class","svelte-1hp6xvt"),f(h,"class","container svelte-1hp6xvt")},m(t,o){!function(t,e,n){t.insertBefore(e,n||null)}(t,n,o),a(n,r),a(r,i),e[6](i),a(r,d),a(r,p),e[7](p),a(n,g),a(n,h),a(h,m),e[8](m),v||(y=[s(i,"click",e[3]),s(p,"change",e[5]),s(m,"input",e[4])],v=!0)},p:t,i:t,o:t,d(t){t&&c(n),e[6](null),e[7](null),e[8](null),v=!1,o(y)}}}const W="SPEECH/TEXT",j="SPEECH/SPEED",H=4;function X(t,e,n){let o=null,r=null,i=null;window.OnActive=async()=>{r.focus();const t=await navigator.clipboard.readText();t?.length>0&&(n(1,r.value=t,r),await navigator.clipboard.writeText(""))},g((async()=>{n(1,r.value=localStorage.getItem(W),r);const t=localStorage.getItem(j);n(2,i.value=0==isNaN(parseInt(t))?t:H,i),speechSynthesis.cancel(),n(0,o.innerText="⏵",o),document.onkeypress=t=>{t?.ctrlKey&&"KeyS"==t?.code&&a()}}));const a=()=>{if(speechSynthesis.speaking)speechSynthesis.cancel(),n(0,o.innerText="⏵",o);else{const t=new SpeechSynthesisUtterance;let e=r.value;e=e.replace(/[ -/:-@\[-\`\{-\~]/g," "),e=e.replace(/(　|。|、|：|（|）|⇒|？|・|，|＃|＞|＜|＿|\”|’|｜|‘|！|…|～)/g," "),e=e.replace(/[\r|\n]/g," "),t.text=e;const a=parseInt(i.value);t.rate=isNaN(a)?1:a,t.lang="ja-JP",t.onstart=()=>n(0,o.innerText="■",o),t.onboundary=t=>{"word"==t.name&&(r.focus(),r.setSelectionRange(t.charIndex+t.charLength,t.charIndex+t.charLength),n(1,r.scrollTop=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};L(e)&&(n=e,e=null);var o=O(n);return A(t,o).getOffset(e)}(r).top-r.offsetHeight/2,r))},t.onend=()=>{n(0,o.innerText="⏵",o)},speechSynthesis.speak(t)}};return[o,r,i,a,()=>{localStorage.setItem(W,r.value)},()=>{const t=parseInt(i.value);0==isNaN(t)&&localStorage.setItem(j,i.value)},function(t){m[t?"unshift":"push"]((()=>{o=t,n(0,o)}))},function(t){m[t?"unshift":"push"]((()=>{i=t,n(2,i)}))},function(t){m[t?"unshift":"push"]((()=>{r=t,n(1,r)}))}]}return new class extends class{$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}{constructor(t){super(),N(this,t,X,I,i,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
